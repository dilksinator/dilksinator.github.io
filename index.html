<!DOCTYPE html>
<html>
<head>
</head>
<body>
  <div class="content" id="content">Placeholder.</div>
  <div id="selected">Selected.</div>
  <button onclick="copy();">Copy</button>
  <button onclick="next();">Next</button>
<script>
  let snippets = []; 
  
  fetch("idylls.txt")
  .then((res) => res.text())
  .then(text => {
    const lines = text.split('\n');
    const i = Math.floor(Math.random() * lines.length);
    const sliced = lines.slice(i, i + 20);
    const joined = sliced.join('<br>');
    document.getElementById('content').innerHTML = joined;
  })
  .catch((e) => console.error(e));
  document.addEventListener('touchend', () => {
  document.getElementById('selected').textContent = snippets.join();
});
function copy() {
  const selectedText = window.getSelection().toString();
  snippets.push(selectedText);
}
function next() {
  fetch("idylls.txt")
  .then((res) => res.text())
  .then(text => {
    const lines = text.split('\n');
    const i = Math.floor(Math.random() * lines.length);
    const sliced = lines.slice(i, i + 10);
    const joined = sliced.join('<br>');
    document.getElementById('content').innerHTML = joined;
  })
  .catch((e) => console.error(e));
  document.addEventListener('touchend', () => {
  document.getElementById('selected').textContent = snippets.join();
});
}
</script>
</body>
</html>
